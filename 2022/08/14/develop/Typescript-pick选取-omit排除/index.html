<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Typescript Pick选取 Omit排除 | 夕风色</title><meta name="description" content="Typescript Pick选取 Omit排除 - 夕风色"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="夕风色"><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="夕风色" type="application/atom+xml">
</head><body><div class="wrap"><header><h1 class="branding"><a href="/" title="夕风色">夕风色</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives" target="_self">ARCHIVES</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://github.com/OKAERI" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about" target="_self">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Typescript Pick选取 Omit排除</h1><div class="post-info"><a></a>2022-08-14</div><div class="post-content"><h4 id="Pick（选取）"><a href="#Pick（选取）" class="headerlink" title="Pick（选取）"></a>Pick（选取）</h4><p>假设咱们有一张用户数据表，其类型如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">User</span> &#123;  </span><br><span class="line">  uid : number;         <span class="comment">// 用户ID  </span></span><br><span class="line">  username : string;    <span class="comment">// 用户名  </span></span><br><span class="line">  password : string;    <span class="comment">// 密码  </span></span><br><span class="line">  email : string;       <span class="comment">// 邮箱  </span></span><br><span class="line">  residence : string;   <span class="comment">// 居住地  </span></span><br><span class="line">  job : string;         <span class="comment">// 职业  </span></span><br><span class="line">  sex : number;         <span class="comment">// 性别  </span></span><br><span class="line">  birthday : string;    <span class="comment">// 生日</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>如果我们写了一个注册接口，我们只需要传输用户名，邮箱，密码给后端。</p>
<p>正常的操作，我们可以写一个新的类型，并且将属性类型和表属性类型关联，这样我们只需新增或者删除类型的时候需要维护操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">RegisterArgs</span> &#123;  </span><br><span class="line">  username : <span class="title class_">User</span>[<span class="string">&#x27;username&#x27;</span>];  </span><br><span class="line">  email : <span class="title class_">User</span>[<span class="string">&#x27;email&#x27;</span>];  </span><br><span class="line">  password : <span class="title class_">User</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用Pick可以简化成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">RegisterArgs</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;username&#x27;</span> | <span class="string">&#x27;email&#x27;</span> | <span class="string">&#x27;password&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>
<p>我们接着将上面的例子代入下面的 Pick 的原型，会容易理解。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Pick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;  [key <span class="keyword">in</span> k]: T[key]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Omit（排除）"><a href="#Omit（排除）" class="headerlink" title="Omit（排除）"></a>Omit（排除）</h4><p>还有一个接口，我想更新个人信息，除了密码不能更改之外，我们都要，但是除了uid之外都是可以缺省的，只要没有传输我们就置空。</p>
<p>PS：一般更改密码需要更多的权限校验，我们的场景是更新基本信息。</p>
<p>按照正常发展，我们会写成这样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 除了uid是必须的，其他都可以省略 </span></span><br><span class="line">interface <span class="title class_">UpdateUserArgs</span> &#123;  </span><br><span class="line">    uid : <span class="title class_">User</span>[<span class="string">&#x27;uid&#x27;</span>]  </span><br><span class="line">    username? : <span class="title class_">User</span>[<span class="string">&#x27;username&#x27;</span>];  </span><br><span class="line">    email? : <span class="title class_">User</span>[<span class="string">&#x27;email&#x27;</span>];  </span><br><span class="line">    residence? : <span class="title class_">User</span>[<span class="string">&#x27;residence&#x27;</span>];  </span><br><span class="line">    job? : <span class="title class_">User</span>[<span class="string">&#x27;job&#x27;</span>];  </span><br><span class="line">    sex? : <span class="title class_">User</span>[<span class="string">&#x27;sex&#x27;</span>];  </span><br><span class="line">    birthday? : <span class="title class_">User</span>[<span class="string">&#x27;birthday&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>又是一堆属性堆砌，现在我们可以使用 Omit 进行简化。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">UpdateUserArgs</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;uid&#x27;</span>&gt; &amp; <span class="title class_">Partial</span>&lt;<span class="title class_">Omit</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;uid&#x27;</span>&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>是不是简单多了，上面我们用 Pick 选择了 uid 保证是必须的。然后用 Omit 将 uid 排除掉 ，拿到剩下的属性，并用 Partial 将属性转为可省略。</p>
<p>我们看下 Omit 的原型，然后将上面的例子代入原型，就可以更好理解了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Omit</span>&lt;T, K <span class="keyword">extends</span> keyof any&gt; = <span class="title class_">Pick</span>&lt;T, <span class="title class_">Exclude</span>&lt;keyof T, K&gt;&gt;;</span><br></pre></td></tr></table></figure>
<p>总的来说，使用内置工具类型增加类型重复利用，让你的代码看起来就像文档一样，赏心悦目。</p>
<p>不过使用 Pick 还是 Omit ， 那就要看使用场景对比哪个维护成本更低。通俗来说如果需要 Pick 一堆属性，还是用 Omit 好 ，如果需要排除一堆属性，那还是用 Pick 好。</p>
<h5 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h5><ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/super_ying123/article/details/124465822">CSDN</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/522017893">知乎</a></li>
</ol>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2022/08/15/develop/opensslErrorStack-%E2%80%98error-03000086-digital-envelope-routines-initialization-error%E2%80%99/">prev</a><a class="next" href="/2022/08/13/develop/Typescript-%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B%E4%B8%8E%E4%BA%A4%E5%8F%89%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB/">next</a></div><div class="copyright"><p>&copy; 2022 <a target="_blank" rel="noopener" href="https://github.com/Dreyer/hexo-theme-artemis">okaeri</a>.<br>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/Dreyer/hexo-theme-artemis" target="_blank">Artemis</a>.</p></div></footer></div></body></html>